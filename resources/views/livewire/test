<main class="main-wrapper clearfix">
<div class="col-md-12 widget-holder">
     <!-- Table: Always visible -->
        @if (!$showForm)
            <div class="widget-bg">
                <div class="widget-body clearfix">
                    <h5 class="box-title">Payees</h5>

                    <!-- Add Payee Button -->
                    <button wire:click="displayForm" class="btn btn-primary btn-rounded mb-3">Add Payee</button>
                    <div class="mb-3 d-flex justify-content-between align-items-center">
                        <h5 class="box-title mb-0">Payees</h5>
                        <input type="text" wire:model.live="search" placeholder="Search account..." class="form-control form-control-rounded w-25">
                    </div>      
                    <!-- Example Payee Table -->
                    <table class="table table-striped table-bordered">
                        <thead>
                            <tr>
                                <th>Vendor Name</th>
                                <th>Contact</th>
                                <th>Email</th>
                                <th>Phone</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            @forelse ($payees as $payee)
                                <tr>
                                    <td>{{ $payee->vendor_name }}</td>
                                    <td>{{ $payee->contact_name }}</td>
                                    <td>{{ $payee->email }}</td>
                                    <td>{{ $payee->phone }}</td>
                                    <td>
                                        <button wire:click="edit({{ $payee->id }})" class="btn btn-sm btn-outline-primary btn-rounded">
                                            Edit
                                        </button>
                                    </td>
                                </tr>
                            @empty
                                <tr>
                                    <td colspan="5">No payees found.</td>
                                </tr>
                            @endforelse
                        </tbody>
                    </table>
                </div>
            </div>
        @endif
         @if ($showForm)
    <div class="widget-bg">
        <div class="widget-body clearfix">
            <h5 class="box-title mr-b-0">Payee Form</h5>

            <form wire:submit.prevent="save">
                <div class="row">

                    <!-- First Column -->
                    <div class="col-md-4">
                        <div class="form-group">
                            <label>Vendor Name</label>
                            <input type="text" wire:model.defer="vendor_name" class="form-control form-control-rounded">
                             @error('vendor_name') 
                                <small class="text-danger">{{ $message }}</small> 
                            @enderror
                        </div>

                        <div class="form-group">
                            <label>Contact Name</label>
                            <input type="text" wire:model.defer="contact_name" class="form-control form-control-rounded">
                        </div>

                        <div class="form-group">
                            <label>Phone</label>
                            <input type="text" wire:model.defer="phone" class="form-control form-control-rounded">
                        </div>

                        <div class="form-group">
                            <label>Email</label>
                            <input type="email" wire:model.defer="email" class="form-control form-control-rounded">
                        </div>

                        <div class="form-group">
                            <label>Fax</label>
                            <input type="text" wire:model.defer="fax" class="form-control form-control-rounded">
                        </div>
                    </div>

                    <!-- Second Column -->
                    <div class="col-md-4">
                        <div class="form-group">
                            <label>State</label>
                            <input type="text" wire:model.defer="state" class="form-control form-control-rounded">
                        </div>

                        <div class="form-group">
                            <label>City</label>
                            <input type="text" wire:model.defer="city" class="form-control form-control-rounded">
                        </div>

                        <div class="form-group">
                            <label>Zip Code</label>
                            <input type="text" wire:model.defer="zip_code" class="form-control form-control-rounded">
                        </div>

                        <div class="form-group">
                            <label>Account Number</label>
                            <input type="text" wire:model.defer="account_number" class="form-control form-control-rounded">
                        </div>

                        <div class="form-group">
                            <label>Payment Method</label>
                            <input type="text" wire:model.defer="payment_method" class="form-control form-control-rounded">
                        </div>
                    </div>

                    <!-- Third Column -->
                    <div class="col-md-4">
                        <div class="form-group">
                            <label>POS ID</label>
                            <input type="text" wire:model.defer="pos_id" class="form-control form-control-rounded">
                        </div>

                        <div class="form-group">
                            <label>Default Margin</label>
                            <input type="text" wire:model.defer="default_margin" class="form-control form-control-rounded">
                        </div>

                        <div class="form-group">
                            <label>Fintech Vendor Code</label>
                            <input type="text" wire:model.defer="fintech_vendor_code" class="form-control form-control-rounded">
                        </div>

                        <div class="form-group">
                            <label>Terms</label>
                            <select wire:model.defer="term_id" class="form-control form-control-rounded">
                                <option value="">Select Term</option>
                                @foreach($termOptions as $term)
                                    <option value="{{ $term->id }}">{{ $term->name }}</option>
                                @endforeach
                            </select>
                        </div>

                        <div class="form-group">
                            <label>Department</label>
                            <select wire:model.defer="department_id" class="form-control form-control-rounded">
                                <option value="">Select Department</option>
                                @foreach($departmentOptions as $dept)
                                    <option value="{{ $dept->id }}">{{ $dept->name }}</option>
                                @endforeach
                            </select>
                        </div>

                       
                    </div>
                    <!-- Fourth Column -->
                    <div class="col-md-4">
                        <div class="form-group">
                            <label>Default Bank Account</label>
                            <select wire:model.defer="default_bank_account_id" class="form-control form-control-rounded">
                                <option value="">Select Bank</option>
                                @foreach($bankOptions as $bank)
                                    <option value="{{ $bank->id }}">{{ $bank->account_name }}</option>
                                @endforeach
                            </select>
                        </div>
                    </div>
                    <div class="w-100"></div>
                    <!-- Address Textareas -->
                    <div class="col-md-6">
                        <div class="form-group">
                            <label>Address 1</label>
                            <textarea wire:model.defer="address_1" class="form-control form-control" rows="3"></textarea>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="form-group">
                            <label>Address 2</label>
                            <textarea wire:model.defer="address_2" class="form-control form-control" rows="3"></textarea>
                        </div>
                    </div>

                    <!-- Types -->
                    <div class="col-md-12">
                        <label class="form-label">Payee Types</label>
                        <div class="row">
                            @foreach(['employee', 'expense', 'customer', 'misc', 'mpos', 'vendor'] as $type)
                                <div class="col-md-2">
                                    <div class="form-check">
                                        <input type="checkbox" class="form-check-input" wire:model="types" value="{{ $type }}" id="check_{{ $type }}">
                                        <label class="form-check-label" for="check_{{ $type }}">{{ ucfirst($type) }}</label>
                                    </div>
                                </div>
                            @endforeach
                        </div>
                    </div>

                    <!-- Submit -->
                    <div class="col-md-12 text-right mt-4">
                        <button type="button" wire:click="hideForm" class="btn btn-secondary btn-rounded">Cancel</button>
                        <button type="submit" class="btn btn-primary btn-rounded">Save & Close</button>
                    </div>

                    <!-- Success Message -->
                    @if (session()->has('message'))
                        <div class="col-md-12 mt-3">
                            <div class="alert alert-success">{{ session('message') }}</div>
                        </div>
                    @endif
                </div>
            </form>
        </div>
    </div>
    @endif
</div>
</main>
